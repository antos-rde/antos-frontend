---
kind: pipeline
type: exec
name: default
platform:
  os: linux
  arch: arm64
clone:
  disable: true
steps:
- name: clone
  commands:
  - pwd
  - git clone git@iohub.dev:lxsang/antos.git
  - cd ./antos && git checkout master
- name: build
  commands:
  - cd ./antos
  - npm link typescript jest @types/jest ts-jest typedoc
  - npm link @types/jquery
  - make test
  - BUILDDIR=/opt/cloud/cuser/os make release
  - DOCDIR=/opt/cloud/cuser/os/doc make doc
trigger:
  branch:
  - master
