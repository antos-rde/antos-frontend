---
kind: pipeline
type: exec
name: default
platform:
  os: linux
  arch: arm64
clone:
  disable: true
steps:
- name: clone
  commands:
  - pwd
  - git clone git@iohub.dev:lxsang/antos.git
  - cd ./antos && git checkout master
- name: build
  commands:
  - npm install @types/jquery @types/jest ts-jest -g
  - cd ./antos && make test
  - BUILDDIR=/opt/cloud/cuser/os cd ./antos && make release
  - DOCDIR=/opt/cloud/cuser/os/doc cd ./antos && make doc
trigger:
  branch:
  - master
